{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"pylts Docs","text":"<p>Limited pydantic wrapper over litestream so that AWS litestream commands can be used as a subprocess of python scripts.</p>"},{"location":"#create-an-aws-bucket","title":"Create an AWS bucket","text":"<p>Follow instructions to get:</p> <ol> <li>S3 Key ID</li> <li>S3 Secret Key</li> <li>S3 Replica URL</li> </ol>"},{"location":"#set-secrets","title":"Set secrets","text":"<p>Secrets must be set in an <code>.env</code> file:</p> Secret Description <code>LITESTREAM_ACCESS_KEY_ID</code> See how this is generated in chosen bucket <code>LITESTREAM_SECRET_ACCESS_KEY</code> See how this is generated in chosen bucket <code>REPLICA_URL</code> Where to get the replica for restoration and replication, e.g. in aws: <code>s3://&lt;bucket_name&gt;/&gt;&lt;folder&gt;</code> <code>DB_SQLITE</code> Optional, if not set db.sqlite, will be placed in a <code>/data/db.sqlite</code>"},{"location":"#venv","title":".venv","text":"Bash<pre><code>poetry add pylts # install\npoetry shell # enter shell\nexport LITESTREAM_ACCESS_KEY_ID=xxx\nexport LITESTREAM_SECRET_ACCESS_KEY=yyy\nexport REPLICA_URL=s3://x/x.db\n</code></pre>"},{"location":"#commands","title":"Commands","text":""},{"location":"#restore","title":"Restore","text":"Bash<pre><code># set secrets first\npython -m pylts aws-restore-db\n</code></pre>"},{"location":"#replicate","title":"Replicate","text":"Bash<pre><code># set secrets first\npython -m pylts aws-replicate-db\n</code></pre>"},{"location":"#dockerfile","title":"Dockerfile","text":"Elements Version Version List python <code>3.11.1</code> versions litestream <code>0.3.9</code> versions sqlite <code>3.40.1</code> versions Bash<pre><code>export LITESTREAM_ACCESS_KEY_ID=xxx\nexport LITESTREAM_SECRET_ACCESS_KEY=yyy\nexport REPLICA_URL=s3://x/x.db\npoetry export -f requirements.txt -o requirements.txt --without-hashes\ndocker build .\ndocker run it \\\n-e LITESTREAM_ACCESS_KEY_ID \\\n-e LITESTREAM_SECRET_ACCESS_KEY \\\n-e REPLICA_URL\n</code></pre>"}]}